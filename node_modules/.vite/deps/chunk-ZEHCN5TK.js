import {
  d,
  u,
  w
} from "./chunk-O7WJARF6.js";
import {
  q
} from "./chunk-C32UJPNP.js";

// node_modules/.pnpm/deepsignal@1.5.0_@preact+signals-core@1.8.0_@preact+signals@1.2.3_preact@10.20.1__preact@10.20.1/node_modules/deepsignal/dist/deepsignal.module.js
var a = /* @__PURE__ */ new WeakMap();
var o = /* @__PURE__ */ new WeakMap();
var s = /* @__PURE__ */ new WeakMap();
var u2 = /* @__PURE__ */ new WeakSet();
var c = /* @__PURE__ */ new WeakMap();
var f = /^\$/;
var i = Object.getOwnPropertyDescriptor;
var l = false;
var g = function(e) {
  if (!k(e))
    throw new Error("This object can't be observed.");
  return o.has(e) || o.set(e, v(e, d2)), o.get(e);
};
var p = function(e, t) {
  l = true;
  var r = e[t];
  try {
    l = false;
  } catch (e2) {
  }
  return r;
};
function h(e) {
  return u2.add(e), e;
}
var v = function(e, t) {
  var r = new Proxy(e, t);
  return u2.add(r), r;
};
var y = function() {
  throw new Error("Don't mutate the signals directly.");
};
var w2 = function(e) {
  return function(t, u3, c2) {
    var g2;
    if (l)
      return Reflect.get(t, u3, c2);
    var p2 = e || "$" === u3[0];
    if (!e && p2 && Array.isArray(t)) {
      if ("$" === u3)
        return s.has(t) || s.set(t, v(t, m)), s.get(t);
      p2 = "$length" === u3;
    }
    a.has(c2) || a.set(c2, /* @__PURE__ */ new Map());
    var h2 = a.get(c2), y2 = p2 ? u3.replace(f, "") : u3;
    if (h2.has(y2) || "function" != typeof (null == (g2 = i(t, y2)) ? void 0 : g2.get)) {
      var w3 = Reflect.get(t, y2, c2);
      if (p2 && "function" == typeof w3)
        return;
      if ("symbol" == typeof y2 && b.has(y2))
        return w3;
      h2.has(y2) || (k(w3) && (o.has(w3) || o.set(w3, v(w3, d2)), w3 = o.get(w3)), h2.set(y2, d(w3)));
    } else
      h2.set(y2, w(function() {
        return Reflect.get(t, y2, c2);
      }));
    return p2 ? h2.get(y2) : h2.get(y2).value;
  };
};
var d2 = { get: w2(false), set: function(e, n, s2, u3) {
  var l2;
  if ("function" == typeof (null == (l2 = i(e, n)) ? void 0 : l2.set))
    return Reflect.set(e, n, s2, u3);
  a.has(u3) || a.set(u3, /* @__PURE__ */ new Map());
  var g2 = a.get(u3);
  if ("$" === n[0]) {
    s2 instanceof u || y();
    var p2 = n.replace(f, "");
    return g2.set(p2, s2), Reflect.set(e, p2, s2.peek(), u3);
  }
  var h2 = s2;
  k(s2) && (o.has(s2) || o.set(s2, v(s2, d2)), h2 = o.get(s2));
  var w3 = !(n in e), m2 = Reflect.set(e, n, s2, u3);
  return g2.has(n) ? g2.get(n).value = h2 : g2.set(n, d(h2)), w3 && c.has(e) && c.get(e).value++, Array.isArray(e) && g2.has("length") && (g2.get("length").value = e.length), m2;
}, deleteProperty: function(e, t) {
  "$" === t[0] && y();
  var r = a.get(o.get(e)), n = Reflect.deleteProperty(e, t);
  return r && r.has(t) && (r.get(t).value = void 0), c.has(e) && c.get(e).value++, n;
}, ownKeys: function(e) {
  return c.has(e) || c.set(e, d(0)), c._ = c.get(e).value, Reflect.ownKeys(e);
} };
var m = { get: w2(true), set: y, deleteProperty: y };
var b = new Set(Object.getOwnPropertyNames(Symbol).map(function(e) {
  return Symbol[e];
}).filter(function(e) {
  return "symbol" == typeof e;
}));
var R = /* @__PURE__ */ new Set([Object, Array]);
var k = function(e) {
  return "object" == typeof e && null !== e && R.has(e.constructor) && !u2.has(e);
};
var M = function(t) {
  return q(function() {
    return g(t);
  }, []);
};

export {
  g,
  p,
  h,
  M
};
//# sourceMappingURL=chunk-ZEHCN5TK.js.map
